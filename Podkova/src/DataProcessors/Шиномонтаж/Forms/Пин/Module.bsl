&НаКлиенте
Процедура СобытиеНажатиеКнопки(Команда)
	Пин = Пин + СокрЛП(ТекущийЭлемент.Заголовок);
	Если СтрДлина(Пин) = 4 Тогда
		ПроверитьПин(Пин);
	КонецЕсли;
	Если ЗначениеЗаполнено(Объект.Бригадир) Тогда
		ПараметрыФормы = Новый Структура("Бригадир", Объект.Бригадир);
		ОткрытьФорму("Обработка.Шиномонтаж.Форма.Бригада",ПараметрыФормы);
		ЭтаФорма.Закрыть();
	КонецЕсли;
КонецПроцедуры

&НаСервере
Процедура ПроверитьПин(Пин)
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ШМ_ПинКоды.Сотрудник
		|ИЗ
		|	Справочник.ШМ_ПинКоды КАК ШМ_ПинКоды
		|ГДЕ
		|	ШМ_ПинКоды.Пин = &Пин";
	
	Запрос.УстановитьПараметр("Пин", Пин);
	Выборка = Запрос.Выполнить().Выбрать();
	
	Если Выборка.Следующий() Тогда
		Объект.Бригадир = Выборка.Сотрудник;
	Иначе
		Сообщить("Неверный ПИН");
		Пин = "";
	КонецЕсли;
КонецПроцедуры

